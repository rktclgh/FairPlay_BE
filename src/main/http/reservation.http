### ===== ì˜ˆì•½ ì‹œìŠ¤í…œ API í…ŒìŠ¤íŠ¸ =====
### ì˜ˆì•½ ì‹œìŠ¤í…œì˜ ëª¨ë“  ê¸°ëŠ¥ì„ í…ŒìŠ¤íŠ¸í•˜ëŠ” HTTP íŒŒì¼ì…ë‹ˆë‹¤.
### í”Œë¡œìš°: 1. ì‚¬ìš©ì ê°€ì…/ë¡œê·¸ì¸ â†’ 2. ì˜ˆì•½ CRUD â†’ 3. ê´€ë¦¬ì ê¸°ëŠ¥

### ===== ë³€ìˆ˜ ì„¤ì • =====
### âœ… ëª¨ë“  IDëŠ” API í˜¸ì¶œ ì‹œ ìë™ ìƒì„±ë˜ì–´ ì €ì¥ë©ë‹ˆë‹¤
@baseUrl = http://localhost:8080
@access_token = {{access_token}}
@eventId = 8
@scheduleId = 1
@ticketId = 1
@reservationId = {{reservationId}}
@randomInt = 1
@user_email = user_1@example.com
@user_password = test1234!

### ===== 1. ì‚¬ì „ ì¤€ë¹„: ì‚¬ìš©ì ê°€ì… ë° ë¡œê·¸ì¸ =====

### ğŸ“ 1-1. ì¼ë°˜ ì‚¬ìš©ì íšŒì›ê°€ì… (ëœë¤ ì •ë³´)
POST {{baseUrl}}/api/users/signup
Content-Type: application/json

{
  "email": "{{user_email}}",
  "name": "í…ŒìŠ¤íŠ¸ìœ ì €{{randomInt}}",
  "nickname": "ì˜ˆì•½í…ŒìŠ¤í„°1{{randomInt}}",
  "phone": "01082828282",
  "password": "{{user_password}}",
  "roleCodeId": 2
}

### ğŸ” 1-2. ë¡œê·¸ì¸ (ìœ„ì—ì„œ ê°€ì…í•œ ê³„ì • ìë™ ì‚¬ìš©)
### âœ… ë¡œê·¸ì¸ ì„±ê³µ ì‹œ access_tokenì´ ìë™ìœ¼ë¡œ ì €ì¥ë˜ì–´ ëª¨ë“  APIì—ì„œ ì‚¬ìš©ë©ë‹ˆë‹¤
POST {{baseUrl}}/api/auth/login
Content-Type: application/json

{
    "email": "{{user_email}}",
    "password": "{{user_password}}"
}

> {%
// ì‘ë‹µ êµ¬ì¡°ì— ë”°ë¼ accessToken ë˜ëŠ” access_token ê²½ë¡œ í™•ì¸
if (response.body.accessToken) {
    client.global.set("access_token", response.body.accessToken);
} else if (response.body.access_token) {
    client.global.set("access_token", response.body.access_token);
} else if (response.body.data && response.body.data.accessToken) {
    client.global.set("access_token", response.body.data.accessToken);
}
%}

### ===== 1.5. í…ŒìŠ¤íŠ¸ ë°ì´í„° ìƒì„± (Event, Schedule, Ticket) =====

### ğŸ¢ 1-3. Event ìƒì„± (í–‰ì‚¬ ë“±ë¡)
### âœ… ìƒì„± ì„±ê³µ ì‹œ eventIdê°€ ìë™ìœ¼ë¡œ ì €ì¥ë©ë‹ˆë‹¤
POST {{baseUrl}}/api/events
Content-Type: application/json
Authorization: Bearer {{access_token}}

{
  "email": "{{user_email}}",
  "titleKr": "í…ŒìŠ¤íŠ¸ í–‰ì‚¬ {{randomInt}}",
  "titleEng": "Test Event {{randomInt}}",
  "hidden": false
}

> {%
if (response.body.eventId) {
    client.global.set("eventId", response.body.eventId);
} else if (response.body.data && response.body.data.eventId) {
    client.global.set("eventId", response.body.data.eventId);
} else if (response.body.id) {
    client.global.set("eventId", response.body.id);
}
%}

### ğŸ¢ 1-4. Event ìƒì„¸ ë“±ë¡ (í–‰ì‚¬ ìƒì„¸ ì •ë³´)
POST {{baseUrl}}/api/events/{{eventId}}/details
Content-Type: application/json
Authorization: Bearer {{access_token}}

{
  "titleKr": "í…ŒìŠ¤íŠ¸ í–‰ì‚¬ ìƒì„¸ ì •ë³´",
  "titleEng": "Test Event Details",
  "address": "ì„œìš¸íŠ¹ë³„ì‹œ ê°•ë‚¨êµ¬ í…Œí—¤ë€ë¡œ 123",
  "placeName": "í…ŒìŠ¤íŠ¸ ì»¨ë²¤ì…˜ ì„¼í„°",
  "latitude": 37.5665,
  "longitude": 126.9780,
  "placeUrl": "https://place.map.test.com/12345",
  "locationDetail": "ë©”ì¸í™€",
  "hostName": "í…ŒìŠ¤íŠ¸ ì£¼ìµœì‚¬",
  "contactInfo": "02-123-4567",
  "bio": "í…ŒìŠ¤íŠ¸ìš© í–‰ì‚¬ì…ë‹ˆë‹¤",
  "content": "ìë™í™” í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ í–‰ì‚¬ì…ë‹ˆë‹¤",
  "policy": "í…ŒìŠ¤íŠ¸ í™˜ë¶ˆ ì •ì±…",
  "officialUrl": "https://test-event.com",
  "eventTime": 120,
  "thumbnailUrl": "https://via.placeholder.com/300x200",
  "startDate": "2025-12-01",
  "endDate": "2025-12-02",
  "mainCategoryId": 4,
  "subCategoryId": 401,
  "externalLinks": [
    {
      "url": "https://test-ticket.com",
      "displayText": "í…ŒìŠ¤íŠ¸ ì˜ˆë§¤"
    }
  ]
}

### ğŸ“… 1-5. Schedule ìƒì„± (ì¼ì • ë“±ë¡)
### âœ… ìƒì„± ì„±ê³µ ì‹œ scheduleIdê°€ ìë™ìœ¼ë¡œ ì €ì¥ë©ë‹ˆë‹¤
POST {{baseUrl}}/api/events/{{eventId}}/schedule
Content-Type: application/json
Authorization: Bearer {{access_token}}

{
  "date": "2025-12-01",
  "startTime": "14:00:00",
  "endTime": "16:00:00",
  "weekday": 1,
  "types": "EVENT"
}

> {%
if (response.body.scheduleId) {
    client.global.set("scheduleId", response.body.scheduleId);
} else if (response.body.data && response.body.data.scheduleId) {
    client.global.set("scheduleId", response.body.data.scheduleId);
} else if (response.body.id) {
    client.global.set("scheduleId", response.body.id);
}
%}

### ğŸ« 1-6. Ticket ìƒì„± (í‹°ì¼“ ë“±ë¡)
### âœ… ìƒì„± ì„±ê³µ ì‹œ ticketIdê°€ ìë™ìœ¼ë¡œ ì €ì¥ë©ë‹ˆë‹¤
POST {{baseUrl}}/api/events/{{eventId}}/tickets
Content-Type: application/json
Authorization: Bearer {{access_token}}

{
  "name": "í…ŒìŠ¤íŠ¸ ì¼ë°˜ í‹°ì¼“",
  "description": "í…ŒìŠ¤íŠ¸ìš© í‹°ì¼“ì…ë‹ˆë‹¤",
  "maxPurchase": 5,
  "price": 20000,
  "stock": 100,
  "types": "EVENT"
}

> {%
if (response.body.ticketId) {
    client.global.set("ticketId", response.body.ticketId);
} else if (response.body.data && response.body.data.ticketId) {
    client.global.set("ticketId", response.body.data.ticketId);
} else if (response.body.id) {
    client.global.set("ticketId", response.body.id);
}
%}

### ğŸ« 1-7. íšŒì°¨ë³„ í‹°ì¼“ ë“±ë¡
POST http://localhost:8080/api/events/{{eventId}}/schedule/{{scheduleId}}/tickets
Content-type: application/json
Accept: application/json

[
  {
    "ticketId": 1,
    "remainingStock": 100,
    "salesStartAt": "2025-09-01T09:00:00",
    "salesEndAt": "2025-09-20T18:00:00",
    "visible": true
  }
]

### ===== 2. ì˜ˆì•½ ê´€ë ¨ API í…ŒìŠ¤íŠ¸ =====

### ğŸ“‹ 2-1. ì˜ˆì•½ ì‹ ì²­ (POST /api/events/{eventId}/reservations)
### âœ… ì˜ˆì•½ ì„±ê³µ ì‹œ reservationIdê°€ ìë™ìœ¼ë¡œ ì €ì¥ë˜ì–´ ì´í›„ APIì—ì„œ ì‚¬ìš©ë©ë‹ˆë‹¤
POST {{baseUrl}}/api/events/{{eventId}}/reservations
Content-Type: application/json
Authorization: Bearer {{access_token}}

{
  "scheduleId": {{scheduleId}},
  "ticketId": {{ticketId}},
  "quantity": 2,
  "price": 40000
}

> {%
// ì‘ë‹µ êµ¬ì¡°ì— ë”°ë¼ reservationId ê²½ë¡œ í™•ì¸
if (response.body.reservationId) {
    client.global.set("reservationId", response.body.reservationId);
} else if (response.body.data && response.body.data.reservationId) {
    client.global.set("reservationId", response.body.data.reservationId);
} else if (response.body.id) {
    client.global.set("reservationId", response.body.id);
}
%}

### ğŸ” 2-2. ì˜ˆì•½ ìƒì„¸ ì¡°íšŒ (GET /api/events/{eventId}/reservations/{reservationId})
GET {{baseUrl}}/api/events/{{eventId}}/reservations/{{reservationId}}
Authorization: Bearer {{access_token}}

### ğŸ“Š 2-3. í–‰ì‚¬ë³„ ì „ì²´ ì˜ˆì•½ ì¡°íšŒ - ê´€ë¦¬ììš© (GET /api/events/{eventId}/reservations)
GET {{baseUrl}}/api/events/{{eventId}}/reservations
Authorization: Bearer {{access_token}}

### âœï¸ 2-4. ì˜ˆì•½ ìˆ˜ì • (PUT /api/events/{eventId}/reservations/{reservationId})
PUT {{baseUrl}}/api/events/{{eventId}}/reservations/{{reservationId}}
Content-Type: application/json
Authorization: Bearer {{access_token}}

{
  "scheduleId": {{scheduleId}},
  "ticketId": {{ticketId}},
  "quantity": 1,
  "price": 20000
}

### ğŸ‘¥ 2-5. ì˜ˆì•½ì ëª…ë‹¨ ì¡°íšŒ - í–‰ì‚¬ ê´€ë¦¬ììš© (GET /api/events/{eventId}/reservations/attendees)
GET {{baseUrl}}/api/events/{{eventId}}/reservations/attendees
Authorization: Bearer {{access_token}}

### ğŸ‘¥ 2-6. ì˜ˆì•½ì ëª…ë‹¨ ì¡°íšŒ (ìƒíƒœ í•„í„°ë§) - í–‰ì‚¬ ê´€ë¦¬ììš©
GET {{baseUrl}}/api/events/{{eventId}}/reservations/attendees?status=CONFIRMED
Authorization: Bearer {{access_token}}

### ğŸ“¥ 2-7. ì˜ˆì•½ì ëª…ë‹¨ ì—‘ì…€ ë‹¤ìš´ë¡œë“œ - í–‰ì‚¬ ê´€ë¦¬ììš© (GET /api/events/{eventId}/reservations/attendees/excel)
GET {{baseUrl}}/api/events/1/reservations/attendees/excel
Authorization: Bearer {{access_token}}

### ğŸ“¥ 2-8. ì˜ˆì•½ì ëª…ë‹¨ ì—‘ì…€ ë‹¤ìš´ë¡œë“œ (ìƒíƒœ í•„í„°ë§) - í–‰ì‚¬ ê´€ë¦¬ììš©
GET {{baseUrl}}/api/events/{{eventId}}/reservations/attendees/excel?status=CONFIRMED
Authorization: Bearer {{access_token}}

### âŒ 2-9. ì˜ˆì•½ ì·¨ì†Œ (PATCH /api/events/{eventId}/reservations/{reservationId})
PATCH {{baseUrl}}/api/events/{{eventId}}/reservations/{{reservationId}}
Authorization: Bearer {{access_token}}

### ===== 3. ì‚¬ìš©ìë³„ ì˜ˆì•½ ì¡°íšŒ API í…ŒìŠ¤íŠ¸ =====

### ğŸ‘¤ 3-1. ë‚´ ì˜ˆì•½ ëª©ë¡ ì¡°íšŒ (GET /api/me/reservations)
GET {{baseUrl}}/api/me/reservations
Authorization: Bearer {{access_token}}

### ===== 4. ì‹¤íŒ¨ ì¼€ì´ìŠ¤ í…ŒìŠ¤íŠ¸ =====

### âŒ 4-1. ì¬ê³  ë¶€ì¡± ì‹œ ì˜ˆì•½ ì‹ ì²­ (ì‹¤íŒ¨ ì¼€ì´ìŠ¤)
POST {{baseUrl}}/api/events/{{eventId}}/reservations
Content-Type: application/json
Authorization: Bearer {{access_token}}

{
  "scheduleId": {{scheduleId}},
  "ticketId": {{ticketId}},
  "quantity": 999,
  "price": 40000
}

### âŒ 4-2. ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì˜ˆì•½ ì¡°íšŒ (ì‹¤íŒ¨ ì¼€ì´ìŠ¤)
GET {{baseUrl}}/api/events/{{eventId}}/reservations/99999
Authorization: Bearer {{access_token}}

### âŒ 4-3. ë‹¤ë¥¸ ì‚¬ìš©ìì˜ ì˜ˆì•½ ìˆ˜ì • ì‹œë„ (ì‹¤íŒ¨ ì¼€ì´ìŠ¤)
PUT {{baseUrl}}/api/events/{{eventId}}/reservations/99999
Content-Type: application/json
Authorization: Bearer {{access_token}}

{
  "scheduleId": {{scheduleId}},
  "ticketId": {{ticketId}},
  "quantity": 1,
  "price": 20000
}

### ğŸ” 4-4. ì¸ì¦ ì—†ì´ API í˜¸ì¶œ (ì‹¤íŒ¨ ì¼€ì´ìŠ¤)
GET {{baseUrl}}/api/events/{{eventId}}/reservations

### ===== 5. ë™ì‹œì„± í…ŒìŠ¤íŠ¸ (ê°™ì€ í‹°ì¼“ ë™ì‹œ ì˜ˆì•½) =====

### ğŸš€ 5-1. ì²« ë²ˆì§¸ ì‚¬ìš©ì ì˜ˆì•½ (ë™ì‹œì„± í…ŒìŠ¤íŠ¸ìš©)
POST {{baseUrl}}/api/events/{{eventId}}/reservations
Content-Type: application/json
Authorization: Bearer {{access_token}}

{
  "scheduleId": {{scheduleId}},
  "ticketId": {{ticketId}},
  "quantity": 1,
  "price": 20000
}

### ğŸš€ 5-2. ë‘ ë²ˆì§¸ ì‚¬ìš©ì ì˜ˆì•½ (ë‹¤ë¥¸ ì‚¬ìš©ì í† í°ìœ¼ë¡œ ì‹¤í–‰)
POST {{baseUrl}}/api/events/{{eventId}}/reservations
Content-Type: application/json
Authorization: Bearer {{access_token}}

{
  "scheduleId": {{scheduleId}},
  "ticketId": {{ticketId}},
  "quantity": 1,
  "price": 20000
}

### ===== í…ŒìŠ¤íŠ¸ ê°€ì´ë“œ =====
### 
### ğŸ”§ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì „ í•„ìˆ˜ í™•ì¸ì‚¬í•­:
### 1. âœ… ì„œë²„ ì‹¤í–‰ ìƒíƒœ: ì‹¤ì œ í¬íŠ¸ í™•ì¸ í›„ @baseUrl ìˆ˜ì •
### 2. âœ… ë°ì´í„°ë² ì´ìŠ¤ ìƒíƒœ: eventId, scheduleId, ticketIdê°€ ì‹¤ì œ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸
### 3. âœ… API ì‘ë‹µ êµ¬ì¡°: ë¡œê·¸ì¸/ì˜ˆì•½ ì‘ë‹µ í•„ë“œëª…ì´ ì½”ë“œì™€ ì¼ì¹˜í•˜ëŠ”ì§€ í™•ì¸
### 4. âœ… ê¶Œí•œ ì„¤ì •: ê´€ë¦¬ì ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸ ì‹œ ì ì ˆí•œ ê¶Œí•œ ë³´ìœ  í™•ì¸
### 
### ğŸš€ ê¶Œì¥ í…ŒìŠ¤íŠ¸ ìˆœì„œ (ì™„ì „ ìë™í™”):
### Step 1: 1-1 íšŒì›ê°€ì… â†’ 1-2 ë¡œê·¸ì¸ (í† í° ìë™ ì €ì¥)
### Step 2: 1-3 Event ìƒì„± (eventId ì €ì¥) â†’ 1-4 Event ìƒì„¸ ë“±ë¡
### Step 3: 1-5 Schedule ìƒì„± (scheduleId ì €ì¥) â†’ 1-6 Ticket ìƒì„± (ticketId ì €ì¥)  
### Step 4: 2-1 ì˜ˆì•½ ì‹ ì²­ (reservationId ì €ì¥) â†’ 2-2 ìƒì„¸ ì¡°íšŒ
### Step 5: 2-4 ì˜ˆì•½ ìˆ˜ì • â†’ 2-3 ì „ì²´ ì¡°íšŒ â†’ 3-1 ë‚´ ì˜ˆì•½ ì¡°íšŒ
### Step 6: 2-5~2-8 ê´€ë¦¬ì ê¸°ëŠ¥ â†’ 2-9 ì˜ˆì•½ ì·¨ì†Œ
### Step 7: 4-1~4-4 ì‹¤íŒ¨ ì¼€ì´ìŠ¤ â†’ 5-1~5-2 ë™ì‹œì„± í…ŒìŠ¤íŠ¸
### 
### ğŸ’¡ ì˜ˆìƒ ì´ìŠˆ ë° í•´ê²°ì±…:
### - 401 Unauthorized: access_token ì €ì¥ ì‹¤íŒ¨ â†’ ë¡œê·¸ì¸ ì‘ë‹µ êµ¬ì¡° í™•ì¸
### - 404 Not Found: API ê²½ë¡œ ì˜¤ë¥˜ â†’ ì„œë²„ ì„¤ì • ë° ì»¨íŠ¸ë¡¤ëŸ¬ í™•ì¸
### - 400 Bad Request: í•„ìˆ˜ í•„ë“œ ëˆ„ë½ â†’ ìš”ì²­ ë°ì´í„° êµ¬ì¡° í™•ì¸
### - 500 Server Error: ì„œë²„ ì˜¤ë¥˜ â†’ ë¡œê·¸ í™•ì¸
### - ID ì €ì¥ ì‹¤íŒ¨: JavaScript ì‘ë‹µ ì²˜ë¦¬ í™•ì¸ â†’ API ì‘ë‹µ êµ¬ì¡° ë¶„ì„
### 
### âš ï¸  ì¤‘ìš” ì£¼ì˜ì‚¬í•­:
### - ğŸ¯ ì™„ì „ ìë™í™”: 1-1ë¶€í„° ìˆœì„œëŒ€ë¡œ ì‹¤í–‰í•˜ë©´ ëª¨ë“  IDê°€ ìë™ ìƒì„±ë¨
### - ğŸ“Š ê° ë‹¨ê³„ë³„ë¡œ ì‘ë‹µ í™•ì¸ í›„ ë‹¤ìŒ ë‹¨ê³„ ì§„í–‰ ê¶Œì¥  
### - ğŸ”‘ ê´€ë¦¬ì ê¸°ëŠ¥(2-5~2-8)ì€ ì ì ˆí•œ ê¶Œí•œ ì—†ì´ 403 Forbidden ë°œìƒ ê°€ëŠ¥
### - ğŸš€ ë™ì‹œì„± í…ŒìŠ¤íŠ¸(5-1~5-2)ëŠ” ë¸Œë¼ìš°ì € ì—¬ëŸ¬ íƒ­ì—ì„œ ë™ì‹œ ì‹¤í–‰ í•„ìš”
### - âŒ ì‹¤íŒ¨ ì¼€ì´ìŠ¤(4-1~4-4)ë„ ì˜ë„ëœ ë™ì‘ì´ë¯€ë¡œ ì •ìƒì ì¸ ì˜¤ë¥˜ ì‘ë‹µ í™•ì¸
### - ğŸ—‚ï¸ ë” ì´ìƒ DBì—ì„œ ì‹¤ì œ IDë¥¼ ì°¾ì•„ ë³€ê²½í•  í•„ìš” ì—†ìŒ!